var SenangStart=function(){"use strict";const t={attributes:{},structurals:{},scopes:{}};function e(){return t.attributes}function r(e){return t.structurals[e]}function n(){return t.scopes}var o=Object.freeze({__proto__:null,getAttributeHandlers:e,getScopeHandler:function(e){return t.scopes[e]},getScopeHandlers:n,getStructuralHandler:r,registerAttribute:function(e,r){t.attributes[e]=r},registerScope:function(e,r){t.scopes[e]=r},registerStructural:function(e,r){t.structurals[e]=r}});const s=["push","pop","shift","unshift","splice","sort","reverse","fill","copyWithin"];let a=!1;const c=new Set;let i=null;function u(t,e,r){return new Proxy(t,{get(t,n){!i||"length"!==n&&isNaN(parseInt(n))||(r.has("__array__")||r.set("__array__",new Set),r.get("__array__").add(i));const o=t[n];return s.includes(n)&&"function"==typeof o?function(...o){const s=Array.prototype[n].apply(t,o);return r.has("__array__")&&r.get("__array__").forEach(t=>{c.add(t)}),_(e),s}:o&&"object"==typeof o?Array.isArray(o)?u(o,e,r):f(o,e,r):o},set:(t,n,o)=>(t[n]===o||(t[n]=o,r.has("__array__")&&r.get("__array__").forEach(t=>{c.add(t)}),_(e)),!0)})}function f(t,e,r){const n=new Proxy(t,{get(t,o){if("__subscribers"===o||"__isReactive"===o)return t[o];i&&(r.has(o)||r.set(o,new Set),r.get(o).add(i));const s=t[o];if("function"==typeof s)return s.bind(n);if(s&&"object"==typeof s){if(Array.isArray(s))return u(s,e,r);if(!s.__isReactive)return f(s,e,r)}return s},set:(t,n,o)=>(t[n]===o||(t[n]=o,r.has(n)&&r.get(n).forEach(t=>{c.add(t)}),_(e)),!0),deleteProperty:(t,n)=>(delete t[n],r.has(n)&&r.get(n).forEach(t=>{c.add(t)}),_(e),!0),ownKeys:t=>Reflect.ownKeys(t).filter(t=>"__subscribers"!==t&&"__isReactive"!==t)});return n}function l(t){i=t;try{t()}finally{i=null}}function _(t){a||(a=!0,queueMicrotask(()=>{a=!1;const e=[...c];c.clear(),e.forEach(t=>{try{l(t)}catch(t){console.error("[SenangStart] Effect error:",t)}}),t&&t()}))}var d=Object.freeze({__proto__:null,createReactive:function(t,e){const r=new Map;let n;return n=Array.isArray(t)?u(t,e,r):f(t,e,r),n.__subscribers=r,n.__isReactive=!0,n},get currentEffect(){return i},pendingEffects:c,runEffect:l,scheduleUpdate:_});function y(t,o=null){if(1!==t.nodeType)return;if(t.hasAttribute("ss-ignore"))return;let s=o;const a=n();for(const[e,r]of Object.entries(a))if(t.hasAttribute(e)){const n=t.getAttribute(e);s=r(t,n,s,o)}if(s!==o&&s&&(t.__ssScope=s),!s)return void Array.from(t.children).forEach(t=>y(t,null));t.tagName;const c=Array.from(t.attributes);for(const e of c){const n=r(e.name);if(n)return void n(t,e.value,s,y)}const i=e();for(const e of Array.from(t.attributes)){const r=e.name,n=e.value;if(i[r]){i[r](t,n,s);continue}const o=r.indexOf(":");if(o>-1){const e=r.substring(0,o);i[e]&&i[e](t,r,n,s)}}Array.from(t.children).forEach(t=>y(t,s))}let p={},h={};var b=Object.freeze({__proto__:null,getDataFactory:function(t){return p[t]},getGlobalStores:function(){return h},getStore:function(t){return h[t]},setReferences:function(t,e){p=t,h=e},walk:y});function g(){const t=new MutationObserver(t=>{for(const e of t)for(const t of e.addedNodes)if(1===t.nodeType){if(t.__ssScope)return;let e=t,r=null;for(;e.parentElement;)if(e=e.parentElement,e.__ssScope){r=e.__ssScope;break}y(t,r)}});return t.observe(document.body,{childList:!0,subtree:!0}),t}const{createReactive:S}=d,{walk:v,setReferences:A}=b,E={},m={};A(E,m);return{data(t,e){return"function"!=typeof e?(console.error("[SenangStart] data() requires a factory function"),this):(E[t]=e,this)},store(t,e){return"object"!=typeof e?(console.error("[SenangStart] store() requires an object"),this):(m[t]=S(e,()=>{}),this)},init(t=document.body){return v(t,null),this},start(){return this.isStarted||(this.isStarted=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.init(),g()}):(this.init(),g())),this},version:"0.1.0",internals:{registry:o,reactive:d,walker:b}}}();
